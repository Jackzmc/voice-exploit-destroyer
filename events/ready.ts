import { VoiceChannel, Client } from 'discord.js';
import Logger from '../src/Logger.js';
import Event from '../src/types/Event.js'


const CHN_JOIN = process.env.MONITOR_JOIN_CHANNEL

export default class extends Event {
    constructor(client: Client, logger: Logger) {
        super(client, logger)
        if(!CHN_JOIN) logger.warn('No MONITOR_JOIN_CHANNEL env set, monitoring may not work.')
    }

    async before() {
        return false;
    }
    async after() {
        if(!CHN_JOIN) return;
        const vc = await this.client.channels.fetch(CHN_JOIN) as VoiceChannel
        const conn = await vc.join()
        conn.voice.setSelfDeaf(true)

    }
}